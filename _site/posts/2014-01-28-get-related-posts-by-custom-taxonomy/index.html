
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get related posts by custom taxonomy</title>
    <link href="https://fonts.googleapis.com/css?family=Merriweather:700|Muli:300,700" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/index.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicons/site.webmanifest">
    <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#000000">
    <link rel="shortcut icon" href="/assets/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
  </head>
  <body class="ui-dark">
    <div class="wrapper">
      <div class="layout"> <div class="header">
  <a class="logo" href="/"><svg class="logo__triangle logo__triangle--left" style="isolation: isolate;" viewbox="217 167 106 96">
  <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--center" style="isolation: isolate;" viewbox="217 167 106 96">
  <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--right" style="isolation: isolate;" viewbox="217 167 106 96">
  <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg></a>
  <div id="nav">
    <div class="menu-wrapper">
      <ul class="menu">
        <li class="menu-item">
          <a href="/">Home</a>
        </li>
        <li class="menu-item">
          <a href="/posts/">Posts</a>
        </li>
        <li class="menu-item">
          <a href="/thoughts/">Thoughts</a>
        </li>
        <li class="menu-item">
          <a href="/about/">About</a>
        </li>
      </ul>
    </div>
  </div>
</div>
<div id="main" class="main">
  <article class="post">
    <header class="postHeader">
      
      <h1 class="postContent__title">
        Get related posts by custom taxonomy
      </h1>
       
      <div class="postContent__date">Posted on Tue, 28 Jan 2014 23:56:21 GMT</div>
      
      <!-- .entry-meta -->
    </header>
    
    <p>In this post we're going to use <a href="http://codex.wordpress.org/Class_Reference/WP_Query">wp_query</a> and <a href="http://codex.wordpress.org/Function_Reference/register_taxonomy">custom taxonomies</a>. Let the fun begin!</p>
<p>What we want is to retrieve posts related to the one we are currently displaying through one (or more) custom taxonomy term by using the following snippet to retrieve the current post type and use it in creative ways. In my case, since I was out of creativity, I just chose to run a simpler query whenever the post_type is not &quot;event. Check it out.</p>
<pre><code>post_type = get_post_type();

if ($post_type == 'event'){
  $args = array(
    'post_type' =&gt; 'post',
    'posts_per_page' =&gt; '3',
    'tax_query' =&gt; array(
    'relation' =&gt; 'AND',
        array(
        'taxonomy' =&gt; 'shtags',
        'field' =&gt; 'slug',
        'terms' =&gt; $myterm,
        'operator' =&gt; 'IN'
        )
    )
  $my_posts = new WP_Query($args);
} else {
    $args = array(
    'post_type' =&gt; 'post',
    'posts_per_page'  =&gt; '1'
    );
  $my_posts = new WP_Query($args);
}
</code></pre>
<p>Credits go mainly to <a href="http://wp.smashingmagazine.com/2013/01/14/using-wp_query-wordpress/">Smashing Magazine</a> and hours of Googling in order to search for an easy solution.</p>

  </article>
</div>
        <footer class="footer">
          <div class="footer__container">
            <p class="footer__text">Find me on:<br>
              <a class="footer__link" href="https://twitter.com/akmur">Twitter</a>,
              <a class="footer__link" href="https://www.linkedin.com/in/alessandromuraro/">LinkedIn</a>,
              <a class="footer__link" href="https://github.com/akmur">Github</a>.
            </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"
      integrity="sha512-tHQeqtcNWlZtEh8As/4MmZ5qpy0wj04svWFK7MIzLmUVIzaHXS8eod9OmHxyBL1UET5Rchvw7Ih4ZDv5JojZww=="
      crossorigin="anonymous"
    ></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
</html>
