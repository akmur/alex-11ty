
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get related posts by custom taxonomy</title>
    <link href="https://fonts.googleapis.com/css?family=Merriweather:700|Muli:300,700" rel="stylesheet">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/index.css">
  </head>
  <body class="ui-dark">
    <div class="wrapper">
      <div class="layout">
        <div class="header">
          <a class="logo" href="/"><svg class="logo__triangle logo__triangle--left" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--center" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--right" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg></a>
          <div id="nav">
            <div class="menu-my-menu-container">
              <ul class="menu" id="menu-my-menu">
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-1408" id="menu-item-1408">
                  <a href="/">Home</a>
                </li>
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1409" id="menu-item-1409">
                  <a href="/posts/">Posts</a>
                </li>
                <li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-6 current_page_item menu-item-1411" id="menu-item-1411">
                  <a href="/about/">About</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="main">
          <p>In this post we‚Äôre going to use¬†<a href="http://codex.wordpress.org/Class_Reference/WP_Query">wp_query</a>¬†and¬†<a href="http://codex.wordpress.org/Function_Reference/register_taxonomy">custom taxonomies</a>. Let the fun begin!</p>
<p>What we want is to retrieve posts related to the one we are currently displaying through one (or more) custom taxonomy term by using the following snippet to retrieve the current post type and use it in creative ways. In my case, since I was out of creativity, I just chose to run a simpler query whenever the post_type is not ‚Äúevent‚Äù. Check it out.</p>
<pre>post_type = get_post_type();

if ($post_type == 'event'){
  $args = array(
    'post_type' =&gt; 'post',
    'posts_per_page' =&gt; '3',
    'tax_query' =&gt; array(
    'relation' =&gt; 'AND',
        array(
        'taxonomy' =&gt; 'shtags',
        'field' =&gt; 'slug',
        'terms' =&gt; $myterm,
        'operator' =&gt; 'IN'
        )
    )
  $my_posts = new WP_Query($args);
} else {
    $args = array(
    'post_type' =&gt; 'post',
    'posts_per_page'  =&gt; '1'
    );
  $my_posts = new WP_Query($args);
}
</pre>
<p>Credits go mainly to <a href="http://wp.smashingmagazine.com/2013/01/14/using-wp_query-wordpress/">Smashing Magazine</a> and hours of Googling in order to search for an easy solution. Also, the little image belongs to SM, it was too good not to be stolen üôÇ<!--54b7243ad41cf1421288506--></p>
<div style="display:none;">
  <a href="https://topodin.com/seo/post/uslugi-kopirajtinga">—É—Å–ª—É–≥–∏ –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä–∞</a>
</div>
<!--/54b7243ad41cf1421288506-->
<!--54b7243ad41cf1421288506-->
<div style="display:none;">
  <a href="https://topodin.com/">en.topodin.com</a>
</div>
<!--/54b7243ad41cf1421288506-->
<!--54b7243ad41cf1421288506-->
<div style="display:none;">
  <a href="https://topodin.com/soft/">–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å —Å–∞–π—Ç</a>
</div>
<!--/54b7243ad41cf1421288506-->
<!--54cd9b6444c531422760804-->
<div style="display:none;">
  <a href="http://dthoodproperties.com/10-euro-gratis-speelgeld-casino.php">roulette spelregels</a>
</div>
<!--/54cd9b6444c531422760804-->
<!--54cd9b6444c531422760804-->
<div style="display:none;">
  <a href="http://inkisa.org/%D1%84%D0%BE%D1%82%D0%BE-%D0%B8%D0%BD%D1%86%D0%B5%D1%81%D1%82/">http://inkisa.org/%D1%84%D0%BE%D1%82%D0%BE-%D0%B8%D0%BD%D1%86%D0%B5%D1%81%D1%82/</a>
</div>
<!--/54cd9b6444c531422760804-->
<!--54cd9b6444c531422760804-->
<div style="display:none;">
  <a href="https://topodin.com/seo/post/vnutrennyaya-optimizatsiya-veb-resursa-osnovy">seo¬†–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è¬†—Å–∞–π—Ç–∞</a>
</div>
<!--/54cd9b6444c531422760804-->

        </div>
        <footer class="footer">
          <div class="footer__container">
            <p class="footer__text">Find me on:<br>
              <a class="footer__link" href="https://twitter.com/akmur">Twitter</a>,
              <a rel="me" href="https://mastodon.social/@akmur" class="footer__link">Mastodon</a>, <a class="footer__link" href="https://www.linkedin.com/in/alessandromuraro/">LinkedIn</a>, <a class="footer__link" href="https://github.com/akmur">Github</a>.
            </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>