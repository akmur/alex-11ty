
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using react-i18next to localise your application</title>
    <link href="https://fonts.googleapis.com/css?family=Merriweather:700|Muli:300,700" rel="stylesheet">
    <link rel="stylesheet" href="/css/index.css">
  </head>
  <body class="ui-dark">
    <div class="wrapper">
      <div class="layout">
        <div class="header">
          <a class="logo" href="/"><svg class="logo__triangle logo__triangle--left" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--center" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg> <svg class="logo__triangle logo__triangle--right" style="isolation: isolate;" viewbox="217 167 106 96">
          <path d="M220 260l50-90 50 90H220z" vector-effect="non-scaling-stroke"></path></svg></a>
          <div id="nav">
            <div class="menu-my-menu-container">
              <ul class="menu" id="menu-my-menu">
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-1408" id="menu-item-1408">
                  <a href="/">Home</a>
                </li>
                <li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1409" id="menu-item-1409">
                  <a href="/posts/">Posts</a>
                </li>
                <li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-6 current_page_item menu-item-1411" id="menu-item-1411">
                  <a href="/about/">About</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="main">
          <p>In this post I would like to go through the configuration I use to provide localisation features to a React application. This might not be the best way, but it surely is the way that works for me, so I hope it can be useful to other people looking to add this same feature.</p>
<h3>Packages to install</h3>
<p>These are the packages to be installed:</p>
<p><code>i18next</code> and <code>react-i18next</code> are the actual internationalization packages.
<code>i18next-browser-languagedetector</code> is a package needed to set the default language to be the same as the current browser language.</p>
<pre class="line-numbers"><code class="language-javascript">npm install i18next react-i18next i18next-browser-languagedetector --save
</code></pre>
<h3>Creating translations</h3>
<p>In order to load translations, we will create as many json files as you need (one for each language) in the <code>public</code> folder, inside the <code>locales</code> folder</p>
<pre class="line-numbers"><code class="language-javascript">./public
    - /locales
        - /de
            - translations.json
        - /en
            - translations.json
</code></pre>
<p>The <code>./public/locales/de/translations.json</code> might look like this:</p>
<pre class="line-numbers"><code class="language-javascript">{
    "basics": {
        "affirmation": "ja",
        "negation": "nein"
    }
}
</code></pre>
<p>and the <code>./public/locales/en/translations.json</code> will look like this:</p>
<pre class="line-numbers"><code class="language-javascript">{
    "basics": {
        "affirmation": "yes",
        "negation": "no"
    }
}
</code></pre>
<h3>Loading Translations in the App</h3>
<p>This is the way I use these translation in <code>./src/index.js</code>:</p>
<p>First I fetch the translations from the locales folder, and once that is done I load the App</p>
<pre class="line-numbers"><code class="language-javascript">import React from 'react'
import ReactDOM from 'react-dom'

import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import XHR from 'i18next-xhr-backend'
import LanguageDetector from 'i18next-browser-languagedetector';

import App from './App'

i18n
  .use(LanguageDetector)
  .use(XHR)
  .use(initReactI18next)
  .init({
    backend: {
      loadPath: '/locales//translation.json'
    },
    load: 'all'
  })
  .then(() =&gt; {
    ReactDOM.render(
     &lt;App /&gt;,
      document.getElementById('root')
    )
  })
</code></pre>
<h3>Using the translations in your app</h3>
<p>Using the translations in your App will then work like this:</p>
<h4>Function components:</h4>
<pre class="line-numbers"><code class="language-javascript">// your react packages here...

import { useTranslation } from 'react-i18next'

const TeamMemberItem = props =&gt; {
  const { t } = useTranslation()

  return (
    &lt;div&gt;
      {t('basics.affirmation')}
      {/* will print yes */}
    &lt;/div&gt;
  )
}
</code></pre>
<h4>React components:</h4>
<pre class="line-numbers"><code class="language-javascript">// your react packages here...

import { Translation } from 'react-i18next'

class MyComponent extends Component {
  render(){
    return (
    &lt;Translation&gt;
      {(t, { i18n }) =&gt; (
        &lt;div&gt;
          {t('basics.negation')}
          {/* will print no */}
        &lt;/div&gt;
      )}
    &lt;/Translation&gt;
    )
  }
}
</code></pre>
<h3>Outside the render function of the component</h3>
<pre class="line-numbers"><code class="language-javascript">// your react packages here...

import i18n from 'i18next'

class MyComponent extends Component {
  const translationValue = i18n.t('basics.affirmation')

  render(){
    return (
     {/* your component */}
    )
  }
}
</code></pre>
<h3>Switching language</h3>
<p>Finally, if you want to switch language, you can do the following in your component</p>
<pre class="line-numbers"><code class="language-javascript">// your react packages here...

import { useTranslation } from 'react-i18next'

const LanguageSwitch = () =&gt; {
    const { i18n } = useTranslation()

    const handleOnLanguageSwitch = () =&gt; {
        // get current language
        const currentLanguage = i18n.language || window.localStorage.i18nextLng || ''

        // set the new language variable
        newLanguage = currentLanguage === 'de' ? 'en' : 'de'

        // change the language
        i18n.changeLanguage(newLanguage)
    }

    return (
        &lt;button onClick={handleOnLanguageSwitch}&gt;
          Change Language
        &lt;/button&gt;
    )
}
</code></pre>
<p>If you would like to discuss this article, you can do so on Linkedin:</p>
<blockquote class="blockquote__linkedin data-lang=" style="border-color: #1D77B5;">
  <p dir="ltr" lang="en">
    I wrote an article about localisation of React apps using react-i18next, hope you can find it interesting ðŸ™‚
  </p>
  <p>
    â€” Alessandro Muraro &#8211; July 4, 2019
  </p>
  <p>
    <a href="https://www.linkedin.com/feed/update/urn:li:activity:6552470270781739008/">Check it out on LinkedIn</a>
  </p>
</blockquote>
<p>Â </p>

        </div>
        <footer class="footer">
          <div class="footer__container">
            <p class="footer__text">Find me on:<br>
              <a class="footer__link" href="https://twitter.com/akmur">Twitter</a>,
              <a rel="me" href="https://mastodon.social/@akmur" class="footer__link">Mastodon</a>, <a class="footer__link" href="https://www.linkedin.com/in/alessandromuraro/">LinkedIn</a>, <a class="footer__link" href="https://github.com/akmur">Github</a>.
            </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>